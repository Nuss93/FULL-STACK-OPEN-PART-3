(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{26:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(0),s=t(2),a=t.n(s),o=t(19),r=t.n(o),u=(t(25),t(26),t(9)),i=t(8),l=t(3),d=t(6),b=function(e){var n=e.handleChange,t=e.input,s=e.submitPerson;return Object(c.jsxs)("form",{onSubmit:s,className:"mb-4",children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{name:"name",type:"text",onChange:n,value:t.name})]}),Object(c.jsxs)("div",{children:["Number: ",Object(c.jsx)("input",{name:"number",type:"number",onChange:n,value:t.number})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},m=t(4),j=t.n(m),h="/api/persons",f=function(){return j.a.get(h).then((function(e){return e.data}))},O=function(e){return j.a.post(h,e).then((function(){return console.log("Operation success!")}))},p=function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(){return console.log("Delete success!")}))},g=function(e,n){return console.log("SERVICES",e,n),j.a.put("".concat(h,"/").concat(e),n).then((function(){return console.log("Update success!")}))},x=function(e){var n=e.persons,t=e.search,s=e.deletePerson,a=n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));return Object(c.jsx)("ul",{children:a.map((function(e,n){return Object(c.jsxs)("li",{className:"mb-2",children:[e.name," ",e.number," ",Object(c.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){s(e)},children:"Delete"})]},n)}))})},v=function(e){var n=e.message;return n.display?Object(c.jsx)("div",{className:"alert alert-".concat(n.color),style:{position:"absolute",bottom:"0",width:"calc(100% - 30px)"},children:n.message}):null},y=function(e){var n=e.handleSearch,t=e.search;return Object(c.jsxs)("div",{className:"mb-4",children:["Search : ",Object(c.jsx)("input",{name:"search",type:"text",onChange:n,value:t})]})},w=function(){var e=Object(s.useState)([]),n=Object(d.a)(e,2),t=n[0],a=n[1],o=Object(s.useState)({name:"",number:""}),r=Object(d.a)(o,2),m=r[0],j=r[1],h=Object(s.useState)(""),w=Object(d.a)(h,2),S=w[0],C=w[1],N=Object(s.useState)({message:"Message",color:"success",display:!1}),k=Object(d.a)(N,2),P=k[0],T=k[1];Object(s.useEffect)((function(){console.log("effect"),f().then((function(e){a(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{className:"m-0",children:"Search Phonebook"}),Object(c.jsx)(y,{handleSearch:function(e){var n=e.target.value;C(n)},search:S}),Object(c.jsx)("h2",{className:"m-0",children:"Add New Contact"}),Object(c.jsx)(b,{submitPerson:function(e){e.preventDefault();var n=t.findIndex((function(e){return e.name.toLowerCase()===m.name.toLowerCase()}));if(-1===n){console.log("contingency");var c=Object(u.a)(t),s=Object(l.a)(Object(l.a)({},m),{},{id:c.length+1});c.push(s),O(s).then((function(){a(c),j({name:"",number:""}),T({message:"Successfully added ".concat(m.name,"!"),color:"success",display:!0}),setTimeout((function(){T({message:"",color:"success",display:!1})}),5e3)})).catch((function(e){console.log(e.message)}))}else{if(window.confirm("".concat(m.name," is already added to the phonebook, do you want to replcae the old number with the new one?"))){var o=Object(u.a)(t);o[n]=Object(l.a)(Object(l.a)({},t[n]),{},{number:m.number});var r=o[n],i=Object(l.a)(Object(l.a)({},r),{},{number:m.number});return console.log("persons",r),console.log(n,r.id),console.log("sini",i,n),void g(r.id,i).then((function(){a(o),j({name:"",number:""}),T({message:"Successfully updated ".concat(m.name,"!"),color:"success",display:!0}),setTimeout((function(){T({message:"",color:"success",display:!1})}),5e3)})).catch((function(e){T({message:"The number for ".concat(r.name," has already been deleted!"),color:"danger",display:!0}),setTimeout((function(){T({message:"",color:"success",display:!1})}),5e3)}))}j({name:"",number:""})}},handleChange:function(e){var n=Object(l.a)(Object(l.a)({},m),{},Object(i.a)({},e.target.name,e.target.value));j(n)},input:m}),Object(c.jsx)("h2",{children:"Phone Numbers"}),Object(c.jsx)(x,{persons:t,search:S,deletePerson:function(e){if(window.confirm("Are you sure you want to delete the contact ".concat(e.name,"?"))){var n=Object(u.a)(t);p(e.id).then((function(){var c=t.findIndex((function(n){return n.id===e.id}));n.splice(c,1),a(n),T({message:"Deleted ".concat(e.name,"!"),color:"danger",display:!0}),setTimeout((function(){T({message:"",color:"success",display:!1})}),5e3)})).catch((function(e){console.log(e.message)}))}}}),Object(c.jsx)(v,{message:P})]})};r.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.e422a5e4.chunk.js.map